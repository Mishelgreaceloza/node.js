const tituloChat = document.getElementById("tituloChat");
let chatPrivadoCon = null;

socket.on("listaUsuarios", (usuarios) => {
  userConectados.innerHTML = "";

  usuarios.forEach((u) => {
    if (u === nombre) return;

    const li = document.createElement("li");
    li.textContent = u;
    li.style.cursor = "pointer";

    li.addEventListener("click", () => {
      chatPrivadoCon = u;

      const salaPrivada = [nombre, u].sort().join("-");

      socket.emit("entrarPrivado", {
        conmigo: nombre,
        con: u
      });

      salaActual = salaPrivada;
      mensajes.innerHTML = "";
      tituloChat.textContent = `Chat con ${u}`;
    });

    userConectados.appendChild(li);
  });
});



socket.on("entrarPrivado", ({ conmigo, con }) => {
  const sala = [conmigo, con].sort().join("-");
  socket.join(sala);
});